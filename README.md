### Movies API
<details>
  <summary>Documenta√ß√£o API</summary>
  
API REST para gerenciar filmes com pagina√ß√£o e ordena√ß√£o. Inclui documenta√ß√£o interativa com Swagger e autentica√ß√£o JWT.

## Instala√ß√£o

```bash
npm install
```

## Como executar

```bash
npm start
```

A API estar√° dispon√≠vel em `http://localhost:3000`

## Autentica√ß√£o

A API utiliza autentica√ß√£o JWT (JSON Web Token). Para acessar os endpoints protegidos, voc√™ deve primeiro fazer login e incluir o token nas requisi√ß√µes.

### Credenciais de teste:
- **Usu√°rio**: `teste`
- **Senha**: `teste`

### Como autenticar:

1. **Fazer login** no endpoint `/auth/login`:
```bash
POST /auth/login
Content-Type: application/json

{
  "usuario": "teste",
  "senha": "teste"
}
```

2. **Usar o token** nas requisi√ß√µes subsequentes:
```bash
GET /movies
Authorization: Bearer SEU_TOKEN_AQUI
```

‚ö†Ô∏è **Importante**: O token expira em 30 minutos. Ap√≥s expirar, voc√™ deve fazer login novamente.

## Documenta√ß√£o Swagger

A documenta√ß√£o interativa da API est√° dispon√≠vel em:
- **Swagger UI**: `http://localhost:3000/api-docs`

A interface Swagger permite:
- Visualizar todos os endpoints dispon√≠veis
- Testar os endpoints diretamente no navegador (incluindo autentica√ß√£o)
- Ver exemplos de requisi√ß√µes e respostas
- Validar par√¢metros de entrada

### Como usar autentica√ß√£o no Swagger:
1. Acesse `/api-docs`
2. Use o endpoint `POST /auth/login` para obter um token
3. Clique no bot√£o "Authorize" üîí no topo da p√°gina
4. Cole o token no campo (n√£o precisa digitar "Bearer")
5. Clique em "Authorize" e depois "Close"
6. Agora voc√™ pode testar os endpoints protegidos

üìñ **Para exemplos detalhados de uso, consulte o arquivo [EXAMPLES.md](EXAMPLES.md)**

## Endpoints

‚ö†Ô∏è **Todos os endpoints abaixo requerem autentica√ß√£o JWT, exceto o `/auth/login`**

### POST /auth/login

Autentica o usu√°rio e retorna um token JWT. **Este √© o √∫nico endpoint p√∫blico.**

#### Requisi√ß√£o:
```json
{
  "usuario": "teste",
  "senha": "teste"
}
```

#### Resposta (200):
```json
{
  "message": "Login realizado com sucesso",
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "expiresIn": "30 minutos",
  "tokenType": "Bearer"
}
```

Lista filmes com suporte a pagina√ß√£o, ordena√ß√£o e filtros. **Requer autentica√ß√£o.**

#### Par√¢metros de Query:

- `page` (opcional): N√∫mero da p√°gina (padr√£o: 1)
- `limit` (opcional): N√∫mero de filmes por p√°gina (padr√£o: 10, m√°ximo: 100)
- `sortBy` (opcional): Campo para ordena√ß√£o - `nome`, `anoLancamento`, `genero` (padr√£o: `nome`)
- `order` (opcional): Ordem da classifica√ß√£o - `asc` ou `desc` (padr√£o: `asc`)
- `genero` (opcional): Filtrar por g√™nero

#### Exemplos:

```bash
# Listar primeiros 10 filmes ordenados por nome
GET /movies

# P√°gina 2 com 5 filmes por p√°gina
GET /movies?page=2&limit=5

# Ordenar por ano de lan√ßamento (mais recente primeiro)
GET /movies?sortBy=anoLancamento&order=desc

# Filtrar filmes de fic√ß√£o cient√≠fica
GET /movies?genero=fic√ß√£o cient√≠fica

# Combinar filtros: filmes de drama, p√°gina 1, ordenados por ano
GET /movies?genero=drama&sortBy=anoLancamento&order=desc&page=1&limit=3
```

#### Resposta:

```json
{
  "data": [
    {
      "id": 1,
      "nome": "O Poderoso Chef√£o",
      "anoLancamento": 1972,
      "descricao": "A saga de uma fam√≠lia de mafiosos italianos em Nova York",
      "genero": "Drama"
    }
  ],
  "pagination": {
    "currentPage": 1,
    "totalPages": 3,
    "totalMovies": 25,
    "moviesPerPage": 10,
    "hasNextPage": true,
    "hasPrevPage": false
  },
  "filters": {
    "sortBy": "nome",
    "order": "asc",
    "genero": null
  }
}
```

### GET /movies/filters üîí

Retorna informa√ß√µes sobre os filtros dispon√≠veis. **Requer autentica√ß√£o.**

#### Resposta:

```json
{
  "availableGenres": ["Drama", "Crime", "Fantasia", "Fic√ß√£o Cient√≠fica", "A√ß√£o", "Anima√ß√£o"],
  "availableSortFields": ["nome", "anoLancamento", "genero"],
  "sortOrders": ["asc", "desc"]
}
```

### GET /health

Health check da API. **N√£o requer autentica√ß√£o.**

#### Resposta:

```json
{
  "status": "OK",
  "timestamp": "2025-07-10T10:30:00.000Z",
  "uptime": 1234.567
}
```

## Estrutura do Filme

Cada filme possui os seguintes campos:

- `id`: Identificador √∫nico (n√∫mero)
- `nome`: Nome do filme (string)
- `anoLancamento`: Ano de lan√ßamento (n√∫mero)
- `descricao`: Descri√ß√£o do filme (string)
- `genero`: G√™nero do filme (string)

## C√≥digos de Status HTTP

- `200`: Sucesso
- `400`: Erro de valida√ß√£o nos par√¢metros ou campos obrigat√≥rios ausentes
- `401`: Token de acesso requerido ou credenciais inv√°lidas
- `403`: Token inv√°lido ou expirado
- `404`: Rota n√£o encontrada
- `500`: Erro interno do servidor

## Valida√ß√µes

- `page`: Deve ser maior que 0
- `limit`: Deve ser entre 1 e 100
- `order`: Deve ser "asc" ou "desc"
- `sortBy`: Deve ser um dos campos v√°lidos (nome, anoLancamento, genero)

## Depend√™ncias M√≠nimas

O projeto usa apenas as depend√™ncias essenciais:

- **express**: Framework web para Node.js
- **jsonwebtoken**: Implementa√ß√£o de JWT para autentica√ß√£o
- **swagger-jsdoc**: Gera√ß√£o de especifica√ß√£o OpenAPI/Swagger a partir de coment√°rios JSDoc
- **swagger-ui-express**: Interface web interativa para documenta√ß√£o da API

## Estrutura do Projeto

```
‚îú‚îÄ‚îÄ index.js          # Servidor principal com endpoints
‚îú‚îÄ‚îÄ swagger.js        # Configura√ß√£o da documenta√ß√£o Swagger
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ movies.js      # Base de dados com mais de 1000 filmes
‚îú‚îÄ‚îÄ package.json       # Configura√ß√µes do projeto
‚îú‚îÄ‚îÄ README.md         # Documenta√ß√£o principal
‚îî‚îÄ‚îÄ EXAMPLES.md       # Exemplos pr√°ticos de uso da API
```
</details>

### Movies Growth Frontend
<details>
  <summary>Documenta√ß√£o Frontend</summary>  
  <br>
Aplica√ß√£o web para listagem e gerenciamento de filmes favoritos, utilizando Angular no frontend e Express.js no backend em Movies API com autentica√ß√£o JWT.

---

## 1. Arquitetura

### 1.1 Estrutura Modular

O projeto segue uma arquitetura **monol√≠tica modular**, baseada em funcionalidades, com divis√£o clara e organizada de responsabilidades:

- **/core**: Servi√ßos centrais (auth, api, interceptors, guards).
- **/features**: Funcionalidades organizadas em componentes, cada um com seus servi√ßos e modelos (ex: movies, favorites-movies).
- **/pages**: Componentes de p√°gina (login, home), usados como pontos de entrada no roteamento.
- **/shared**: M√≥dulo para componentes reutiliz√°veis e materiais compartilhados.

A estrutura √© simples e orientada √† escalabilidade: A arquitetura permite a implementa√ß√£o de lazy-loading e a potencial decomposi√ß√£o do frontend em micro-frontends.

---

## 2. Como Executar o Projeto

### 2.1 Backend (API)

Siga as instru√ß√µes em [Movies API](#movies-api)

### Frontend (Angular)

## Instala√ß√£o
Acesse o diret√≥rio movies-frontend

```bash
cd movies-frontend
```
e instale com

```bash
npm install
```

## Execu√ß√£o:
```bash
ng serve -o
```

A aplica√ß√£o estar√° dispon√≠vel em http://localhost:4200

‚ö†Ô∏è O frontend depende da API estar rodando localmente na porta 3000.

## 3. Decis√µes T√©cnicas
### 3.1 Tecnologias Principais

- **Angular Material**: Utilizado para componentes de UI, como filtros (`MatSelect`) e pagina√ß√£o (`MatPaginator`);
- **RxJS**: Utilizado para manipula√ß√£o reativa de dados ass√≠ncronos, especialmente em servi√ßos HTTP, gerenciamento de filtros, pagina√ß√£o e tratamento de erros via Observables;
- **Karma + Jasmine**: Ferramentas para testes unit√°rios automatizados, focando na l√≥gica funcional do frontend.


### 3.2 Interceptor JWT
Foi implementado um JwtInterceptor para injetar automaticamente o token nas requisi√ß√µes autenticadas.

### 3.3 Organiza√ß√£o de Filtros e Pagina√ß√£o
A API /movies/filters fornece os g√™neros dispon√≠veis e campos de ordena√ß√£o v√°lidos. O componente MoviesComponent consome esses dados e armazena localmente os filtros dispon√≠veis.

Ao aplicar filtros ou trocar de p√°gina:

O componente monta a query string com os par√¢metros necess√°rios.

A API retorna os dados paginados junto com informa√ß√µes de pagina√ß√£o e os filtros aplicados.

A interface atualiza automaticamente com base nesses dados.

## 4. Testes
### 4.1 Estrat√©gia
Os testes realizados com Karma e Jasmine, focam na l√≥gica funcional. Evitam valida√ß√£o de templates (ex: router-outlet) e priorizam:

Correta chamada de servi√ßos;

Manipula√ß√£o de estado interno;

Tratamento de erros;

Comportamento em mudan√ßas de p√°gina e filtros.

### 4.2 Execu√ß√£o

```bash
ng test
```

### 4.2 Cobertura
- Statements: 98.38%

- Branches: 83.33%

- Functions: 96%

- Lines: 98.33%

### 4.2.1 Exemplos de Verifica√ß√µes
MoviesComponent testa:

Carregamento de filtros e filmes no ngOnInit;

Atualiza√ß√£o da p√°gina e aplica√ß√£o de filtros;

Intera√ß√µes com FavoriteMoviesService;

Tratamento de falhas da API.

AuthService e JwtInterceptor possuem testes que:

Validam extra√ß√£o e inje√ß√£o de token;

Confirmam prote√ß√£o por guardas;

Garantem que as rotas seguras s√≥ s√£o acessadas com autentica√ß√£o v√°lida.

## 5. Estrutura de Pastas
### 5.1 Frontend (Angular)

```bash
/app
‚îú‚îÄ‚îÄ core/                          # M√≥dulo central com servi√ßos e infraestrutura base
‚îÇ   ‚îú‚îÄ‚îÄ auth/                     # Servi√ßos e funcionalidades de autentica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts       # Servi√ßo para login, logout e controle de sess√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.guard.ts         # Guarda de rota para proteger rotas que precisam de autentica√ß√£o
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ jwt.interceptor.ts    # Interceptor HTTP que injeta o token JWT nas requisi√ß√µes e intercepta√ß√£o de erros
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api.service.ts        # Servi√ßo gen√©rico para chamadas HTTP √† API backend
‚îÇ   ‚îî‚îÄ‚îÄ core.module.ts            # M√≥dulo que agrega os providers do core
‚îú‚îÄ‚îÄ features/                     # Componentes funcionais do aplicativo, separados por dom√≠nio
‚îÇ   ‚îú‚îÄ‚îÄ movies/                   # Funcionalidade de listagem de filmes,  pagina√ß√£o e filtros
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ movies.component.ts  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ movies.service.ts    # Servi√ßo para consumir API de filmes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ movie.model.ts        
‚îÇ   ‚îú‚îÄ‚îÄ favorites/                # Funcionalidade de filmes favoritos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favorite-list.component.ts  # Componente para listar filmes favoritos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ favorites.service.ts     # Servi√ßo para gerenciar favoritos (armazenamento local ou backend)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ favorite.model.ts         
‚îú‚îÄ‚îÄ pages/                       # Componentes que representam p√°ginas/rotas principais
‚îÇ   ‚îú‚îÄ‚îÄ login/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ login.component.ts   # P√°gina de login do usu√°rio
‚îÇ   ‚îî‚îÄ‚îÄ home/
‚îÇ       ‚îî‚îÄ‚îÄ home.component.ts    # P√°gina inicial com layout base, header e footer
‚îú‚îÄ‚îÄ shared/                      # M√≥dulo para componentes e m√≥dulos compartilhados
‚îÇ   ‚îî‚îÄ‚îÄ shared.module.ts         
‚îú‚îÄ‚îÄ app-routing.module.ts        # Defini√ß√£o das rotas principais e filhas da aplica√ß√£o
‚îú‚îÄ‚îÄ app.module.ts                # M√≥dulo raiz

```

# 6. Considera√ß√µes Finais
O projeto foi constru√≠do com foco em objetividade, escalabilidade, clareza de responsabilidades e facilidade de manuten√ß√£o. A integra√ß√£o entre frontend e backend √© modular e testada, com alto √≠ndice de cobertura e estrutura preparada para evoluir com novas funcionalidades.

</details>